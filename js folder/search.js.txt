const input = document.getElementById("searchInput");
const resultsDiv = document.getElementById("results");

input.addEventListener("keyup", () => {
  const value = input.value.toLowerCase();
  resultsDiv.innerHTML = "";

  const filtered = protocols.filter(p =>
    p.title.toLowerCase().includes(value) ||
    p.category.toLowerCase().includes(value) ||
    p.keywords.join(" ").toLowerCase().includes(value)
  );

  if (filtered.length === 0) {
    resultsDiv.innerHTML = "<p>No protocol found.</p>";
    return;
  }

  filtered.forEach(p => {
    const div = document.createElement("div");
    div.className = "protocol-card";
    div.innerHTML = `
      <h3>${p.title}</h3>
      <p>${p.category}</p>
      <a class="btn" href="protocol.html?id=${p.id}">Open</a>
    `;
    resultsDiv.appendChild(div);
  });
});